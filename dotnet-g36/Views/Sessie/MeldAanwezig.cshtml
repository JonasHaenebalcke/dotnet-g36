@model dotnet_g36.Models.ViewModels.MeldAanwezigViewModel
@using Microsoft.AspNetCore.Identity
@inject SignInManager<Gebruiker> SignInManager
@inject UserManager<Gebruiker> UserManager
@*inject IUserRepository  UserRepository*@

@{ViewData["Title"] = "Aanwezigheid Registreren";}
@*@if (Model >= DateTime.Now) { }*@

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewData["Title"]</title>
</head>
<body>
    <br />
    <h1>Aanwezigheid Registreren voor @Model.Titel</h1><br />
    @*SESSIE AUTOMATISCH SLUITEN MAAR WERKT NIET
        <p>Deze sessie zal automatisch afsluiten</p>
    <script>
        var timer = setTimeout(function () {
           var id = @Model.SessieID; //if you want to pass an Id parameter
            window.location.href = '@Url.Action("Sluiten", "Sessie")/' + id;
        }, 3000);
        TempData["delay"]
    </script>*@
    <div class="row">
        <div class="col-md-4">
            <h5>Gelieve uw studentenkaart te scannen of uw e-mail in te geven.</h5><br />
            @*<input />*@
            <form method="post" asp-action="MeldAanwezig" asp-controller="Sessie">
                <input type="text" class="form-control" asp-for="Barcode"><br />
                <button class="btn btn-secondary ml-1">Voeg toe</button>
            </form><br />
            <form method="post" asp-action="Sluiten" asp-controller="Sessie" asp-route-id="@Model.SessieID">
                <button class="btn btn-secondary ml-1">Sluit Sessie</button>
            </form><br />
            @*<a href="#">Studentenkaart vergeten?</a>*@
            <br /><br />
        </div>

        <div class="col-md-8">
            <table class="table table-striped">
                <tr>
                    <th class="text-center">Reeds Aanwezig</th>

                </tr>

                @*@foreach (var aanwezigen in (List<string>)ViewData["Aanwezig"])
                    @foreach (var aanwezigen in Model.Aanwezigen)
                    {
                        @if (aanwezigen.Count() == 0)
                            {
                                <tr>
                                    <td class="text-center">Nog niemand aanwezig.</td>

                                </tr>
                            }
                        <tr>
                            <td class="text-center">@aanwezigen</td>
                        </tr>*@

                @if (Model.Aanwezigen.Count == 0)
                {
                    <tr>
                        <td class="text-center">Nog niemand aanwezig.</td>
                    </tr>
                }
                else
                {
                    @foreach (var aanwezigen in Model.Aanwezigen)
                    {

                        <tr>
                            <td class="text-center">@aanwezigen</td>
                        </tr>
                    }

                }
            </table>
        </div>
    </div>
    <div class="container">
        <main role="main" class="pb-3">
            @if (TempData["error"] != null)
            {
                <div class="alert alert-warning">@TempData["error"]</div>
            }
            @if (TempData["message"] != null)
            {
                <div class="alert alert-success">@TempData["message"]</div>
            }
        </main>
    </div>
</body>
</html>
